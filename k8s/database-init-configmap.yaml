apiVersion: v1
kind: ConfigMap
metadata:
  name: jr-db-init-script
  namespace: jr-namespace
  labels:
    app: milestone2
    tier: database
data:
  init-mongo.js: |
    // MongoDB initialization script for Milestone 2
    // This script runs when the MongoDB container starts for the first time

    // Switch to the milestone2 database
    db = db.getSiblingDB('milestone2');

    // Create users collection and insert initial user
    db.users.insertOne({
        user_id: 1,
        name: "Jeron",
        created_at: new Date(),
        updated_at: new Date()
    });

    // Create index on user_id for faster queries
    db.users.createIndex({ user_id: 1 }, { unique: true });

    // Log success
    print("✓ MongoDB initialized successfully");
    print("✓ Users collection created");
    print("✓ Initial user 'Jeron' inserted");